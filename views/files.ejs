<!-- views/files.ejs -->
<!DOCTYPE html>
<html>
<head>
  <title><%= title %></title>
</head>
<body>
    <h1><%= title %></h1>
    <% if (!root) {%>
        <a href="/files/<%= parent %>">.. (Parent Directory)</a>
    <% } %>
    <% for (let i = 0; i < contents.length; i++) { %>
        <p>Subdirectory: <a href="/files/<%= contents[i].id %>"><%= contents[i].name %></a></p>
    <%}%>

    <form action="/viewfile/upload" method="post" enctype="multipart/form-data">
        <input type="number" name="dirIdUpload" id="dirIdUpload" hidden readonly value="<%= id %>">
        <label for="upFile">Upload File To Directory: </label>
        <input type="file" name="upFile" id="upFile">
        <button type="submit">Upload</button>
    </form>

    <h3>Directory Controls</h3>

    <% if (!root) {%>
        <form action="/files/updatedirname" method="post">
            <label for="newName">Change Directory Name: </label>
            <input type="text" name="newName" id="newName" required>
            <input type="number" name="dirId" id="dirId" hidden readonly value="<%= id %>">
            <button type="submit">Update Name</button>
        </form>
    <% } %>

    <form action="/files/newdir" method="post">
        <label for="dirName">Add new subdirectory with name: </label>
        <input type="text" name="dirName" id="dirName" required>
        <input type="number" name="parDir" id="parDir" hidden readonly value="<%= id %>">
        <button type="submit">Add Subdirectory</button>
    </form>

    <a href="/">Home</a>
    <% if (!root) {%>
        <form action="/files/delete" method="post">
            <input type="number" name="deleteId" id="deleteId" hidden readonly value="<%= id %>">
            <button type="submit" onclick="return confirm('Are you sure you want to delete this directory? This will delete all contents and all subdirectories!?');">Delete Directory</button>
        </form>
    <% } %>
</body>
</html>
